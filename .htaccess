# Railway .htaccess - CONFIGURAÇÃO MÍNIMA
DirectoryIndex index.php index.html

# Rewrite Engine
RewriteEngine On

# Health check - garantir que / funciona
RewriteCond %{REQUEST_URI} ^/$
RewriteRule ^$ index.php [L]

# API routes - processar diretamente
RewriteCond %{REQUEST_URI} ^/api/
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^api/(.*)$ api/$1 [L,QSA]

# Frontend routes
RewriteCond %{REQUEST_URI} ^/frontend/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^frontend/.*$ /frontend/index.html [L]

# Fallback para root
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/api/
RewriteCond %{REQUEST_URI} !^/frontend/
RewriteRule ^.*$ index.php [L]

# CORS básico
<IfModule mod_headers.c>
    Header always set Access-Control-Allow-Origin "*"
    Header always set Access-Control-Allow-Methods "GET, POST, OPTIONS"
    Header always set Access-Control-Allow-Headers "Content-Type"
</IfModule>

# OPTIONS requests
RewriteCond %{REQUEST_METHOD} OPTIONS
RewriteRule ^(.*)$ $1 [R=200,L]